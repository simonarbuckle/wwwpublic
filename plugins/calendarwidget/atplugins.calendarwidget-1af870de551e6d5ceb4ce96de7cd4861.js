/*
 * Copyright 2013 Plugin developer. 
 */
//***MULTI-PART
//*******************
//LOGICAL-PATH:atplugins/calendarwidget/Calendar.js
//*******************
Aria.classDefinition({$classpath:"atplugins.calendarwidget.Calendar",$extends:"aria.html.Template",$statics:{INVALID_CONFIGURATION:"%1Invalid configuration for the Calendar Widget."},$dependencies:["atplugins.calendarwidget.CalendarCfgBeans","aria.utils.Event","aria.DomEvent"],$constructor:function(a){a.classpath=a.template?a.template:"atplugins.calendarwidget.views.Calendar",a.moduleCtrl=a.moduleCtrl?a.moduleCtrl:"atplugins.calendarwidget.controllers.CalendarController",this.$Template.constructor.apply(this,arguments);var t={beanName:"atplugins.calendarwidget.CalendarCfgBeans.CalendarCfg",json:this._cfg};try{this._cfgOk=aria.core.JsonValidator.normalize(t,!0)}catch(e){this.$logError(this.INVALID_CONFIGURATION,null,e)}},$prototype:{}});
//*******************
//LOGICAL-PATH:atplugins/calendarwidget/CalendarCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"atplugins.calendarwidget.CalendarCfgBeans",$namespaces:{json:"aria.core.JsonTypes",html:"aria.templates.CfgBeans",common:"aria.widgetLibs.CommonBeans"},$beans:{EventTimeZoneCfg:{$type:"json:Object",$restricted:!1,$properties:{start:{$type:"json:Date"},end:{$type:"json:Date"},name:{$type:"json:String"}}},EventCfg:{$type:"json:Object",$restricted:!1,$properties:{currentStart:{$type:"json:Date"},currentEnd:{$type:"json:Date"},timeZones:{$type:"json:Array",$contentType:{$type:"EventTimeZoneCfg"}}}},CalendarCfg:{$type:"json:Object",$restricted:!1,$properties:{events:{$type:"json:Array",$contentType:{$type:"EventCfg"}},id:{$type:"json:String",$mandatory:!1},moduleCtrl:{$type:"html:ModuleCtrl"},template:{$type:"json:PackageName"},listen:{$type:"common:Callback"}}}}});
//*******************
//LOGICAL-PATH:atplugins/calendarwidget/CalendarWidgetLib.js
//*******************
Aria.classDefinition({$classpath:"atplugins.calendarwidget.CalendarWidgetLib",$extends:"aria.widgetLibs.WidgetLib",$singleton:!0,$prototype:{widgets:{Calendar:"atplugins.calendarwidget.Calendar"}}});
//*******************
//LOGICAL-PATH:atplugins/calendarwidget/controllers/CalendarController.js
//*******************
Aria.classDefinition({$classpath:"atplugins.calendarwidget.controllers.CalendarController",$extends:"aria.templates.ModuleCtrl",$implements:["atplugins.calendarwidget.controllers.ICalendarController"],$dependencies:["aria.widgets.Template"],$prototype:{$publicInterfaceName:"atplugins.calendarwidget.controllers.ICalendarController",init:function(){var e={beanName:"atplugins.calendarwidget.CalendarCfgBeans.CalendarCfg",json:this._data};try{this._cfgOk=aria.core.JsonValidator.normalize(e,!0)}catch(t){this.$logError(this.INVALID_CONFIGURATION,null,t)}this.json.addListener(this._data,"date",{fn:this._onDateModelChange,scope:this}),this.json.addListener(this._data.events,null,{fn:this._onEventsModelChange,scope:this}),this.json.addListener(this._data,"timeZone",{fn:this._onTimeZoneChange,scope:this}),this.$ModuleCtrl.init.apply(this,arguments)},_onDateModelChange:function(){this.$raiseEvent("dateModelChange")},_onEventsModelChange:function(){this.$raiseEvent("eventsModelChange")},_onTimeZoneChange:function(){this.$raiseEvent("timeZoneChange")},itemClick:function(){},itemDoubleClick:function(){},gridClick:function(){},gridDoubleClick:function(){},itemEditMove:function(){},itemEditResize:function(){},itemEditBegin:function(){},itemEditEnd:function(){},change:function(){},timeZoneChange:function(){}}});
//*******************
//LOGICAL-PATH:atplugins/calendarwidget/controllers/ICalendarController.js
//*******************
Aria.interfaceDefinition({$classpath:"atplugins.calendarwidget.controllers.ICalendarController",$extends:"aria.templates.IModuleCtrl",$events:{dateModelChange:"",eventsModelChange:"",timeZoneChange:""},$interface:{itemClick:function(){},itemDoubleClick:function(){},gridClick:function(){},gridDoubleClick:function(){},itemEditMove:function(){},itemEditResize:function(){},itemEditBegin:function(){},itemEditEnd:function(){},change:function(){},timeZoneChange:function(){}}});
//*******************
//LOGICAL-PATH:atplugins/calendarwidget/views/Calendar.tpl
//*******************
Aria.classDefinition({$classpath:"atplugins.calendarwidget.views.Calendar",$extends:"aria.templates.Template",$constructor:function(){this.$Template.constructor.call(this),this.$CalendarScript.constructor.call(this)},$destructor:function(){this.$CalendarScript.$destructor.call(this),this.$Template.$destructor.call(this)},$dependencies:["aria.widgets.AriaLib","atplugins.calendarwidget.views.CalendarScript","aria.utils.Type","aria.utils.Date"],$css:["atplugins.calendarwidget.views.CalendarStyle"],$prototype:{macro_main:function(){try{with(this)this.__$write("\n<div ",8),this.__$writeId("calendar",8),this.__$write(' class="calendar">\n<div class="sidebar"></div>\n<div ',8),this.__$statementOnEvent("dblclick",this.$normCallback({fn:this.moduleCtrl.gridDoubleClick,scope:this.moduleCtrl}),10),this.__$statementOnEvent("click",this.$normCallback({fn:this.moduleCtrl.gridClick,scope:this.moduleCtrl}),14),this.__$write('\nclass="main-content">\n',18),this.macro_header_navigation(),this.__$beginSection(20,!1,{id:"calendar-grid",type:"div",attributes:{classList:["calendar-grid"]},bindRefreshTo:[{inside:data,to:"type"},{inside:data,to:"range"}],macro:"calendar_grid"}),this.__$endSection(),this.__$write("\n</div>\n</div>\n",32)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",this["aria:currentLineNumber"]],_ex)}},macro_header_navigation:function(){try{with(this)this.__$write('\n<div class="header-nav">\n<div class="pull-left">\n<button class="btn" ',37),this.__$statementOnEvent("click",this.$normCallback("navigateToToday"),39),this.__$write('>Today</button>\n<div class="btn-group">\n<button class="btn" ',39),this.__$statementOnEvent("click",this.$normCallback("navigatePrevious"),41),this.__$write('>&laquo;</button>\n<button class="btn" ',41),this.__$statementOnEvent("click",this.$normCallback("navigateNext"),42),this.__$write(">&raquo;</button>\n</div>\n",42),this.__$beginSection(44,!1,{id:"date",bindRefreshTo:[{inside:data,to:"date"},{inside:data,to:"type"}],macro:"header_date"}),this.__$endSection(),this.__$write("\n</div>\n",52),this.__$beginSection(53,!1,{id:"type",type:"div",attributes:{classList:["btn-group","pull-right"]},macro:"calendar_type_toggle",bindRefreshTo:[{inside:data,to:"type"}],on:{click:{fn:"toggleType",scope:this}}}),this.__$endSection(),this.__$write("\n</div>\n",67)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["header_navigation",this["aria:currentLineNumber"]],_ex)}},macro_calendar_grid:function(){try{with(this)this.__$beginSection(71,!1,{id:"calendar-header",type:"table",attributes:{cellpadding:0,cellspacing:0,classList:["calendar-header"]},macro:{name:"calendar_header_"+TYPES[data.type]}}),this.__$endSection(),this.__$beginSection(83,!1,{id:"calendar-wrapper",type:"div",attributes:{classList:["calendar-wrapper","calendar-wrapper-"+TYPES[data.type]]},macro:{name:"calendar_wrapper_"+TYPES[data.type]},on:{mousewheel:{fn:"onScroll",scope:this}}}),this.__$endSection()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["calendar_grid",this["aria:currentLineNumber"]],_ex)}},macro_header_date:function(){try{with(this)2===this.data.type?this.__$write(this.$modifier("dateformat",[data.date,"MMMM yyyy"]),101):1===this.data.type&&(this.__$write("\nWeek ",103),this.__$write(getWeek(),103),this.__$write("/52\n",103))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["header_date",this["aria:currentLineNumber"]],_ex)}},macro_calendar_type_toggle:function(){try{with(this)this.__$write('\n<button data-type="0" class="btn ',108),0===this.data.type&&this.__$write("active",108),this.__$write('">Day</button>\n<button data-type="1" class="btn ',108),1===this.data.type&&this.__$write("active",109),this.__$write('">Week</button>\n',109)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["calendar_type_toggle",this["aria:currentLineNumber"]],_ex)}},macro_calendar_header_day:function(){try{with(this)this.__$write('\n<thead class="header-day">\n<tr>\n<th class="hours" scope="col"></th>\n<th scope="col">',113),this.__$write(this.$modifier("dateformat",[data.date,"EEE MMMM d, yyyy"]),116),this.__$write('</th>\n<th class="dummy-th"></th>\n</tr>\n</thead>\n',116)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["calendar_header_day",this["aria:currentLineNumber"]],_ex)}},macro_calendar_header_week:function(){try{with(this){this.__$write('\n<thead class="header-week">\n<tr>\n<th class="hours" scope="col"></th>\n',123);var __v_1=data.range.slice(0,9);void 0==data.range.slice(0,9)&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",126]);for(var day_ct=0,__v_2=__v_1.length,day_index=0;__v_2>day_index;day_index++){var day=__v_1[day_index];day_ct++,this.__$write('\n<th class="day_',127),this.__$write(day_index,127),this.__$write(" ",127),isToday(day)&&this.__$write("today",127),this.__$write(" ",127),isWeekEnd(day)&&this.__$write("weekend",127),this.__$write('" scope="col">\n<div class="date">',127),this.__$write(this.$modifier("dateformat",[day,"d"]),128),this.__$write('</div>\n<div class="day">',128),this.__$write(weekDays[day.getDay()],129),this.__$write('</div>\n<div class="month">',129),this.__$write(this.$modifier("dateformat",[day,"MMM yyyy"]),130),this.__$write("</div>\n</th>\n",130)}this.__$write('\n<th class="dummy-th"></th>\n</tr>\n</thead>\n',133)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["calendar_header_week",this["aria:currentLineNumber"]],_ex)}},macro_calendar_header_month:function(){try{with(this){this.__$write('\n<thead class="header-month">\n<tr>\n',139);var __v_3=data.range.slice(0,7);void 0==data.range.slice(0,7)&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",141]);for(var day_ct=0,__v_4=__v_3.length,day_index=0;__v_4>day_index;day_index++){var day=__v_3[day_index];day_ct++,this.__$write('\n<th class="day day_',142),this.__$write(day_index,142),this.__$write('" scope="col">',142),this.__$write(weekDays[day.getDay()],142),this.__$write("</th>\n",142)}this.__$write("\n</tr>\n</thead>\n",144)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["calendar_header_month",this["aria:currentLineNumber"]],_ex)}},macro_calendar_wrapper_day:function(){try{with(this)this.macro_grid()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["calendar_wrapper_day",this["aria:currentLineNumber"]],_ex)}},macro_calendar_wrapper_week:function(){try{with(this)this.macro_grid()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["calendar_wrapper_week",this["aria:currentLineNumber"]],_ex)}},macro_grid:function(){try{with(this){this.__$beginSection(158,!1,{id:"all_daySection",macro:"all_day",bindRefreshTo:[{to:"allDayExpanded",inside:data,recursive:!0},{to:"events",inside:data,recursive:!0}]}),this.__$endSection(),this.__$write('\n\n<div class="timetable" style="top: ',171),this.__$write(22*viewData.allDayRows,172),this.__$write('px;" data-scrollable="true">\n<table class="',172),1===data.range.length?this.__$write("day",173):this.__$write("week",173),this.__$write('" cellpadding="0" cellspacing="0">\n<tbody>\n',173);for(var i=0;24>i;i++)for(var j=0;2>j;j++){this.__$write('\n<tr>\n<th class="hours" scope="row">\n<div>',177),0==j?(this.__$write(this.$modifier("pad",[i,2,!0]),179),this.__$write(":00",179)):this.__$write("&nbsp;",179),this.__$write("</div>\n<div>&nbsp;</div>\n</th>\n",179);var __v_5=data.range;void 0==data.range&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",182]);for(var day_ct=0,__v_6=__v_5.length,day_index=0;__v_6>day_index;day_index++){var day=__v_5[day_index];day_ct++,this.__$write('\n<td class="',183),isToday(day)&&this.__$write("today",183),this.__$write(" ",183),isWeekEnd(day)&&this.__$write("weekend",183),this.__$write(" ",183),isWorkHour(i+1)||this.__$write("no-work",183),this.__$write(" ",183),0==j&&this.__$write("hourStart",183),this.__$write('">\n<div></div>\n<div class="dash"></div>\n</td>\n',183)}this.__$write("\n</tr>\n",188)}this.__$write("\n</tbody>\n</table>\n\n",191),this.__$beginSection(194,!1,{id:"itemsSection",macro:{name:"items",args:[!1]},bindRefreshTo:[{to:"events",inside:data,recursive:!0}],attributes:{classList:["timetableSpan"]}}),this.__$endSection(),this.__$beginSection(212,!1,{id:"modificationLayer",macro:{name:"items",args:[!0]},bindRefreshTo:[{to:"modifyingEvents",inside:viewData,recursive:!0}],attributes:{classList:["timetableSpan"]}}),this.__$endSection(),this.__$write("\n\n</div>\n\n",229)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["grid",this["aria:currentLineNumber"]],_ex)}},macro_items:function(isModificationLayer){try{with(this){var events=calculateEventsForColumns(isModificationLayer);this.__$write("\n\n<table ",237),isModificationLayer&&0==viewData.modifyingEvents.length&&this.__$write(' style="display:none"',238),this.__$write(' class="',238),1===data.range.length?this.__$write("day-items",238):this.__$write("week-items",238),this.__$write(' calendar-items-outer" cellpadding="0" cellspacing="0">\n<tbody>\n<tr>\n<th class="hours" scope="row">\n</th>\n',238);var __v_7=events;void 0==events&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",243]);for(var column_ct=0,__v_8=__v_7.length,column_index=0;__v_8>column_index;column_index++){var column=__v_7[column_index];column_ct++,this.__$write("\n<td\n",245),isModificationLayer||data.lock||this.__$statementOnEvent("mousedown",this.$normCallback({fn:this.mousedown,scope:this,args:{column:column_index,isAllDay:!1,isColumn:!0}}),247),this.__$write('\ndata-class="calendar-column-outer" data-id="',253),this.__$write(column_index,253),this.__$write('">\n',253),!isModificationLayer&&isToday(data.range[column_index])&&(this.__$write('\n<div class="currentTimeLine" ',255),this.__$writeId("currentTimeLine",255),this.__$write(' style="top : ',255),this.__$write(getCurrentTimePosition(),255),this.__$write('px"></div>\n',255)),this.__$write('\n<div class="calendar-column" ',257),isModificationLayer||(this.__$write(" ",257),this.__$writeId("column_"+column_index,257),this.__$write(" ",257)),this.__$write(">\n",257);var __v_9=column;void 0==column&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",258]);for(var event_ct=0,__v_10=__v_9.length,event_index=0;__v_10>event_index;event_index++){var event=__v_9[event_index];event_ct++;var className=this.$getId(isModificationLayer?"modifyingCalendarItem":"calItem_"+event.event.order);this.__$write("\n<div\n",260),isModificationLayer||(this.__$statementOnEvent("mouseover",this.$normCallback({fn:this.itemHighlight,scope:this,args:{className:className}}),262),this.__$statementOnEvent("mouseout",this.$normCallback({fn:this.itemUnhighlight,scope:this,args:{className:className}}),267),this.__$statementOnEvent("click",this.$normCallback({fn:this.itemClick,scope:this,args:{data:event}}),272),this.__$statementOnEvent("dblclick",this.$normCallback({fn:this.itemDoubleClick,scope:this,args:{data:event}}),277),data.lock||event.event.uneditable||this.__$statementOnEvent("mousedown",this.$normCallback({fn:this.mousedown,scope:this,args:{column:column_index,order:event.event.order}}),283)),this.__$write('\ndata-column="',290),this.__$write(column_index,290),this.__$write('" data-index="',290),this.__$write(event_index,290),this.__$write('" data-className="',290),this.__$write(className,290),this.__$write('" class="calendar-item ',290),this.__$write(className,290),this.__$write(" ",290),event.hasResizeTop||this.__$write("eventContinuation ",290),event.event.holiday&&this.__$write("holiday ",290),data.lock||event.event.uneditable||this.__$write("movable ",290),this.__$write(isModificationLayer?"moving":_selected(event.id),290),this.__$write('" style="z-index : ',290),this.__$write(isModificationLayer?1e3:event.pos,290),this.__$write("; left : ",290),this.__$write(event.left,290),this.__$write("%; width : ",290),this.__$write(event.width,290),this.__$write("%; top : ",290),this.__$write(event.top,290),this.__$write("px; height : ",290),this.__$write(event.height,290),this.__$write('px;">\n',290),isModificationLayer||data.lock||event.event.uneditable||!event.hasResizeTop||(this.__$write('\n<div class="resize-top"\n',292),this.__$statementOnEvent("mousedown",this.$normCallback({fn:this.mousedown,scope:this,args:{isResize:!0,resizeTop:!0,column:column_index,order:event.event.order}}),293),this.__$write("\n></div>\n",298)),event.showTimeHeader&&(this.__$write('\n<div class="calendar-item-header">\n',301),this.__$write(getFormattedTime(event.event.start),302),this.__$write("\n</div>\n",303)),event.showEndTime&&isModificationLayer&&(this.__$write('\n<div class="calendar-item-footer">\n',306),this.__$write(getFormattedTime(event.event.end),307),this.__$write("\n</div>\n",308)),this.__$write('\n<span class="event-title">\n',310),this.__$write(event.event.title,311),this.__$write("\n</span>\n",312),isModificationLayer||data.lock||event.event.uneditable||(this.__$write('\n<div class="resize-bottom"\n',314),this.__$statementOnEvent("mousedown",this.$normCallback({fn:this.mousedown,scope:this,args:{isResize:!0,resizeTop:!1,column:column_index,order:event.event.order}}),315),this.__$write("\n></div>\n",320)),this.__$write("\n</div>\n",322)}this.__$write("\n</div>\n</td>\n",324)}this.__$write("\n</tr>\n</tbody>\n</table>\n",327)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["items",this["aria:currentLineNumber"]],_ex)}},macro_all_day:function(){try{with(this){var eventsSubset=filterAndOrderEvents(!1),rows=getAllDayEventsRows(data.allDayExpanded,eventsSubset);this.__$write('\n<div style="position:relative; width: 100%;height: ',336),this.__$write(22*rows,336),this.__$write('px;" data-scrollable="true">\n<table class="all-day-events" cellpadding="0" cellspacing="0">\n<tbody>\n<tr>\n<th class="hours" scope="row">\n<div class="timezone">&nbsp;</div>\n<div class="timezone">&nbsp;</div>\n</th>\n\n',336);var __v_11=data.range;void 0==data.range&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",345]);for(var day_ct=0,__v_12=__v_11.length,day_index=0;__v_12>day_index;day_index++)__v_11[day_index],day_ct++,this.__$write("\n<td>\n<div>&nbsp;</div>\n<div>&nbsp;</div>\n</td>\n",346);this.__$write('\n\n<td class="dummy-td"></td>\n</tr>\n</tbody>\n</table>\n\n',351),this.__$beginSection(357,!1,{id:"itemsAllDaySection",macro:{name:"itemsAllDay",args:[!1,data.allDayExpanded,eventsSubset]},attributes:{classList:["all-day-section"]},bindRefreshTo:[{to:"events",inside:data,recursive:!0}]}),this.__$endSection(),this.__$beginSection(373,!1,{id:"allDayModificationLayer",macro:{name:"itemsAllDay",args:[!0,data.allDayExpanded]},bindRefreshTo:[{to:"modifyingAllDayEvents",inside:viewData,recursive:!0}]}),this.__$endSection(),this.__$write("\n\n</div>\n",385)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["all_day",this["aria:currentLineNumber"]],_ex)}},macro_itemsAllDay:function(isModificationLayer,expanded,eventsSub){try{with(this){var eventsSubset=isModificationLayer?filterAndOrderEvents(!0):filterAndOrderEvents(!1);this.__$write("\n\n<table ",393),isModificationLayer&&0==viewData.modifyingAllDayEvents.length&&this.__$write(' style="display:none"',394),this.__$write(' class="all-day-events ',394),isModificationLayer&&this.__$write("modLayer",394),this.__$write(' itemsContainer" cellpadding="0" cellspacing="0">\n<tbody>\n<tr>\n<th class="hours" scope="row">\n<div class="timezone">',394),this.__$write(getTimezone(),398),this.__$write("</div>\n</th>\n\n",398);var __v_13=data.range;void 0==data.range&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",401]);for(var day_ct=0,__v_14=__v_13.length,day_index=0;__v_14>day_index;day_index++){__v_13[day_index],day_ct++,this.__$write("\n<td\n",402),isModificationLayer||data.lock||this.__$statementOnEvent("mousedown",this.$normCallback({fn:this.mousedown,scope:this,args:{column:day_index,isAllDay:!0,isColumn:!0}}),404),this.__$write('\ndata-class="calendar-column-outer" data-id="',410),this.__$write(day_index,410),this.__$write('">\n<div style="height: 100%; width: 100%; position: relative; top: 0px;">\n\n',410);var events=eventsSubset[day_index];data.range[day_index];for(var allDayNum=0,i=0,len=events.length;len>i;i++)if(events[i]&&events[i].event){if(1>i||expanded){var className=this.$getId(isModificationLayer?"modifyingAllDayCalendarItem":"calItem_"+events[i].event.order),firstClass=events[i].meta.first_day||0==data.type?"first":"",lastClass=events[i].meta.last_day||0==data.type?"last":"",eventIndex=events[i].event.order;this.__$write("\n<div\n",423),isModificationLayer||(this.__$statementOnEvent("mouseover",this.$normCallback({fn:this.itemHighlight,scope:this,args:{className:className}}),425),this.__$statementOnEvent("mouseout",this.$normCallback({fn:this.itemUnhighlight,scope:this,args:{className:className}}),430),this.__$statementOnEvent("click",this.$normCallback({fn:this.itemClick,scope:this,args:{data:events[i]}}),435),this.__$statementOnEvent("dblclick",this.$normCallback({fn:this.itemDoubleClick,scope:this,args:{data:events[i]}}),440),data.lock||events[i].event.uneditable||this.__$statementOnEvent("mousedown",this.$normCallback({fn:this.mousedown,scope:this,args:{column:day_index,order:eventIndex,isAllDay:!0}}),446)),this.__$write('\nclass="calendar-all-day-item ',453),this.__$write(firstClass,453),this.__$write(" ",453),this.__$write(lastClass,453),this.__$write(" ",453),this.__$write(className,453),this.__$write(" ",453),this.__$write(_selected(eventIndex),453),this.__$write('" style="position: absolute; top:',453),this.__$write(22*i,453),this.__$write('px; width:100%;">\n<div class="event',453),data.lock||events[i].event.uneditable||this.__$write(" movable",454),events[i].event.holiday&&this.__$write(" holiday",454),this.__$write('">\n',454),!events[i].meta.first_day||0==data.type||data.lock||events[i].event.uneditable||(this.__$write("\n<div\n",456),isModificationLayer||this.__$statementOnEvent("mousedown",this.$normCallback({fn:this.mousedown,scope:this,args:{isAllDay:!0,isResize:!0,resizeTop:!0,column:day_index,order:events[i].event.order}}),458),this.__$write(' class="resize-left"></div>\n',463)),this.__$write('\n<div class="title">',465),(events[i].meta.first_day||0==data.type)&&(this.__$write(" ",465),this.__$write(events[i].event.title,465),this.__$write(" ",465)),this.__$write("&nbsp;</div>\n",465),!events[i].meta.last_day||0==data.type||data.lock||events[i].event.uneditable||(this.__$write("\n<div\n",467),isModificationLayer||this.__$statementOnEvent("mousedown",this.$normCallback({fn:this.mousedown,scope:this,args:{isAllDay:!0,isResize:!0,resizeTop:!1,column:day_index,order:events[i].event.order}}),469),this.__$write('  class="resize-right"></div>\n',474)),this.__$write("\n</div>\n</div>\n",476)}i>0&&(allDayNum+=1)}allDayNum>0&&(this.__$write("\n<div ",486),this.__$statementOnEvent("click",this.$normCallback("toggleExpand"),486),this.__$write(' class="title" style="text-align: center; position: absolute; top:',486),this.__$write(expanded?22*events.length:22,486),this.__$write('px; width:100%;">\n<span class="expandAllDay">\n',486),expanded?this.__$write("\n&#9650\n",489):(this.__$write("\n+",491),this.__$write(allDayNum,491),this.__$write("&nbsp;  &#9660\n",491)),this.__$write("\n</span>\n</div>\n",493)),this.__$write("\n</div>\n</td>\n",496)}this.__$write('\n\n<td class="dummy-td"></td>\n\n</tr>\n</tbody>\n</table>\n\n',499)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["itemsAllDay",this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$macrolibs={},t.__$width={},t.__$height={},aria.core.TplClassLoader._importScriptPrototype(atplugins.calendarwidget.views.CalendarScript,t)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:atplugins/calendarwidget/views/CalendarScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"atplugins.calendarwidget.views.CalendarScript",$constructor:function(){this.weekDays=["sun","mon","tue","wed","thu","fri","sat"],this.selected=null,this.TABLE_HEIGHT=2016,this.STEP=this.TABLE_HEIGHT/24/4,this.tmpItems={},this.viewData={}},$destructor:function(){aria.core.Timer.cancelCallback(this.idTimeoutRefreshLine)},$statics:{TYPES:["day","week"]},$prototype:{onModuleEvent:function(t){"dateModelChange"==t.name&&this.__update(this.data.type,this.data.date),"eventsModelChange"==t.name&&(this.data.events.selectedEventIndex="",this.$refresh()),"timeZoneChange"==t.name&&(this.data.events.selectedEventIndex="",this.updateEvents(),this.moduleCtrl.timeZoneChange())},$displayReady:function(){void 0===this.idTimeoutRefreshLine&&this.__startRefreshTask()},$dataReady:function(){this.viewData.modifyingEvents=[],this.viewData.modifyingAllDayEvents=[],this.data.startWeekDay=this.data.startWeekDay||0,this.data.highlightWeekEnd=this.data.highlightWeekEnd||!1,this.data.workHours=this.data.workHours||[0,24],this.__normalizeEventsDates(),this.__update(this.data.type,this.data.date)},$beforeRefresh:function(t){if(aria.utils.Array.indexOf(["itemsSection","calendar-wrapper","calendar-grid"],t.outputSection)>-1||void 0===t.outputSection){var e=Aria.$window.document.querySelectorAll("#"+this.$getId("calendar")+" div.timetable");0!==e.length&&(this.lastTimetableScroll=e[0].scrollTop)}},$afterRefresh:function(t){var e=aria.utils.Dom.getElementById(this.$getId("calendar"));e.onselectstart=Aria.returnFalse,t&&"all_daySection"==t.outputSection&&this.setTimetableTopOffset(),(!t||void 0===t.outputSection||aria.utils.Array.indexOf(["itemsSection","calendar-wrapper","calendar-grid"],t.outputSection)>-1)&&this.__restoreTimetableScroll()},__normalizeEventsDates:function(){for(var t=0,e=this.data.events.length;e>t;t++){var i=this.data.events[t];i.originalStart=i.start,i.originalEnd=i.end,i.start=this.__getClosestDateStep(i.start),i.end=this.__getClosestDateStep(i.end)}},__startRefreshTask:function(){void 0!==this.idTimeoutRefreshLine&&this.__refreshCurrentTimeLine(),this.idTimeoutRefreshLine=aria.core.Timer.addCallback({fn:this.__startRefreshTask,scope:this,delay:3e5})},__refreshCurrentTimeLine:function(){var t,e,i,a,n=aria.utils.Dom.getElementById(this.$getId("currentTimeLine")),s=this.getTodayColumn();n&&(t=n.parentNode,e=new aria.templates.DomElementWrapper(t),i=e.getData("id"),a=!this.isToday(this.data.range[i]),a&&t.removeChild(n));var r=!n&&null!=s||n&&a;if(void 0!==s){if(n||(n=Aria.$window.document.createElement("div"),n.className="currentTimeLine",n.id=this.$getId("currentTimeLine")),r){var o=aria.utils.Dom.getElementById(this.$getId("column_"+s));o.parentNode.insertBefore(n,o)}var d=this.getCurrentTimePosition();n.style.top=d+"px"}},__getClosestDateStep:function(t){var e=new Date(t),i=t.getMinutes(),a=i%15;return 0!==a&&(a>7?e.setMinutes(e.getMinutes()+15-a):e.setMinutes(e.getMinutes()-a)),e.setSeconds(0),e},getDaysInMonth:function(t){var e=t.getFullYear(),i=t.getMonth();return new Date(e,i+1,0).getDate()},startingDayInMonth:function(t){var e=new Date(t.getFullYear(),t.getMonth(),1);return e.getDay()},navigateToToday:function(){this.__update(this.data.type,new Date)},navigatePrevious:function(t){var e,i=this.data.date,a=i.getFullYear(),n=i.getMonth(),s=i.getDate();switch(this.data.type){case 0:e=new Date(a,n,s-1);break;case 1:e=new Date(a,n,s-7)}this.__update(this.data.type,e),t.stopPropagation()},navigateNext:function(t){var e,i=this.data.date,a=i.getFullYear(),n=i.getMonth(),s=i.getDate();switch(this.data.type){case 0:e=new Date(a,n,s+1);break;case 1:e=new Date(a,n,s+7)}this.__update(this.data.type,e),t.stopPropagation()},__update:function(t,e){aria.utils.Json.setValue(this.data,"date",e),aria.utils.Json.setValue(this.data,"range",this.calculateDatesRange(t,e))},onScroll:function(t){2===this.data.type&&(0>(t.detail||t.wheelDelta)?this.navigatePrevious(t):this.navigateNext(t))},toggleExpand:function(){aria.utils.Json.setValue(this.data,"allDayExpanded",!this.data.allDayExpanded)},toggleType:function(t){var e=parseInt(t.target.getData("type"),10);e!==this.data.type&&(aria.utils.Json.setValue(this.data,"type",e),this.__update(e,this.data.date))},getWeek:function(){var t=new Date(this.data.date.getFullYear(),0,1);return Math.ceil(((this.data.date-t)/864e5+t.getDay()+1)/7)},isDateMatching:function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},isInHalfHourSlice:function(t,e){return 18e5>Math.abs(e.getTime()-t.getTime())},isToday:function(t){return this.isDateMatching(new Date,t)},getTodayColumn:function(){var t=this.data.range[0],e=new Date,i=Math.floor((e-t)/864e5);return this.data.range.length>i&&i>=0?i:null},isWeekEnd:function(t){return 0===t.getDay()||6===t.getDay()},isWorkHour:function(t){return t>=this.data.workHours[0]&&this.data.workHours[1]>=t},getTimezone:function(){return this.data.timeZone.replace(/[/|_]/g," ")},getMonthCellCssClass:function(t){var e=[],i=this.data.date,a=new Date;return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setSeconds(-1),t.getMonth()<i.getMonth()?e.push("previous"):t.getMonth()>i.getMonth()?e.push("next"):this.isToday(t)&&e.push("today"),a>t&&e.push("past"),this.data.highlightWeekEnd&&this.isWeekEnd(t)&&e.push("weekend"),e.join(" ")},getEventCellCssClass:function(t,e,i,a){var n=new Date,s=(n.setHours(0)&&n.setMinutes(0)&&n.setSeconds(0)&&n.setSeconds(-1),["event","movable"]),r=n>t,o=i.first_day,d=i.last_day,l=e.all_day;return r&&s.push("past"),!o||d&&!l||s.push("first-day"),o&&!l||!d||s.push("last-day"),o||d||s.push("ongoing-day"),1!==a||o||s.push("break-start"),7!==a||d||s.push("break-end"),s.join(" ")},calculateDatesRange:function(t,e){var i=[],a=(new Date,this.data.startWeekDay),n=function(t,e,i){for(var a=[],n=e,s=7*i+n+(1==i?2:0);s>n;n++)a.push(new Date(t.getFullYear(),t.getMonth(),n));return a};if(0===t)i.push(new Date(e.getFullYear(),e.getMonth(),e.getDate()));else if(1===t){var s=e.getDay(),r=e.getDate(),o=r-s+a;i=n(e,o-1,1)}return i},__getDayEvent:function(t,e){var i={event:e,meta:{first_day:this.isDateMatching(t,e.start),last_day:this.isDateMatching(t,e.end)}};return i},__pushOnFirstFree:function(t,e){for(var i=0,a=t.length;a>i;i++)if(!t[i])return t[i]=e,i;return t.push(e),t.length-1},__sameDay:function(t,e){return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()},setEventOrder:function(){for(var t=0,e=this.data.events.length;e>t;t++)this.data.events[t].order=t},updateEvents:function(){var t=this.data.events;aria.templates.RefreshManager.stop();for(var e=0,i=t.length;i>e;e++)this._updateEvent(t[e]);aria.templates.RefreshManager.resume()},_updateEvent:function(t){var e;void 0===t.timeZones&&this.updateEventTimeZones(t);for(var i=0,a=t.timeZones.length;a>i;i++)e=t.timeZones[i],e.name===this.data.timeZone&&(aria.utils.Json.setValue(t,"start",new Date(e.start)),aria.utils.Json.setValue(t,"end",new Date(e.end)))},_calculateTimeZoneDifference:function(t){var e;t.timeZones=t.timeZones?t.timeZones:[];for(var i=0,a=t.timeZones.length;a>i;i++)if(e=t.timeZones[i],e.name===this.data.timeZone)return t.start.getTime()-e.start.getTime();return null},_calculateTimeZoneOffset:function(){for(var t,e=this.data.events[0].timeZones,i=[],a=this.data.events[0].originalStart,n=0,s=e.length;s>n;n++)t=e[n],i.push({name:t.name,offset:t.start.getTime()-a.getTime()});return i},updateEventTimeZones:function(t){var e,i=this._calculateTimeZoneDifference(t);if(null===i){for(var a=[],n=this._calculateTimeZoneOffset(),s=0,r=n.length;r>s;s++)e=n[s],a.push({name:e.name,start:new Date(t.start.getTime()+e.offset),end:new Date(t.end.getTime()+e.offset)});t.timeZones=a}else for(var s=0,r=t.timeZones.length;r>s;s++)e=t.timeZones[s],e.start=new Date(e.start.getTime()+i),e.end=new Date(e.end.getTime()+i)},calculateEventsForColumns:function(t){var e=15,i=this,a=function(t,e){return function(i){var a=new Date(e);return a.setDate(a.getDate()+1),!i.all_day&&(a>=i.start&&i.end>=a||t>=i.start&&i.end>=t||i.start>=t&&a>=i.end)}},n=function(t){return function(e){return i.isDateMatching(e.start,t)||i.isDateMatching(t,e.end)&&t.getTime()!=e.end.getTime()||t>e.start&&e.end>t}},s=function(t,a){var n,s=i.__sameDay(a.start,t)?a.start:t;if(i.__sameDay(a.end,t))n=a.end;else{var r=new Date(t);r.setDate(t.getDate()+1),n=a.end}var o=new Date(a.start);o.setMinutes(a.start.getMinutes()+e);var d=s-t,l=n-s,h=l/9e5,_=d*i.TABLE_HEIGHT/864e5;_=_-1>0?_-1:_;var c=l*i.TABLE_HEIGHT/864e5-2,u=i.isDateMatching(a.start,t)&&h>1,m=i.isDateMatching(a.end,t)&&(h>2||2==h&&!u);return{top:_,height:c,showTimeHeader:u,showEndTime:m}},r=function(t,e){var i=80/(e+1)+20,a=0===e?0:(100-i)/e,n=t*a;return i-=2,{left:n,width:i}},o=this.data,d=parseInt((o.range[o.range.length-1]-o.range[0])/864e5,10)+1,l=t?this.viewData.modifyingEvents:this.data.events;this.setEventOrder();for(var h=aria.utils.Array.filter(l,a(o.range[0],o.range[o.range.length-1])),_=new Date(o.range[0]),c=[],u=[],m=0;d>m;m++,_.setDate(_.getDate()+1)){c.push([]);var v=[],g=aria.utils.Array.filter(h,n(_));g.sort(function(t,e){return t.start-e.start});for(var w in g)if(g.hasOwnProperty(w)){for(var p=s(_,g[w]),f={event:g[w],top:p.top,height:p.height,pos:void 0,numOverlaps:0,showTimeHeader:p.showTimeHeader,showEndTime:p.showEndTime,hasResizeTop:this.__sameDay(g[w].start,_)},$=0,y=v.length;y>$;$++)if(v[$].evt.event.end<=g[w].start){f.pos=$;break}f.pos=void 0!==f.pos?f.pos:v.length;for(var E=[],$=0,y=v.length;y>$;$++)$!=f.pos&&v[$].evt.event.end>g[w].start&&(v[$].conflicts[f.pos]||(v[$].conflicts[f.pos]=!0,v[$].evt.numOverlaps++),f.numOverlaps++,E[$]=!0);v[f.pos]={evt:f,conflicts:E},c[m].push(f)}for(var D=0,y=c[m].length;y>D;D++){var f=c[m][D],C=r(f.pos,f.numOverlaps);f.left=C.left,f.width=C.width;var b=aria.utils.Array.indexOf(u,f.event);-1!=b?f.id=b:(f.id=u.length,u.push(f.event))}}return t||(this.eventsMatrix=c),c},filterAndOrderEvents:function(t){var e,i=[],a=[],n=this,s=[],r=this.data.range,o=function(t){return function(e){return e.all_day&&(n.isDateMatching(e.start,t)||n.isDateMatching(t,e.end)||t>e.start&&e.end>t)}},d=function(t,e,i){var a=(t.end-t.start)/864e5+1,n=i-e,s=Math.min(a,n);return 100*s};this.setEventOrder();for(var l=0,h=r.length;h>l;l++){for(var _=[],c=[],u=r[l],e=aria.utils.Array.filter(t?this.viewData.modifyingAllDayEvents:this.data.events,o(u)),m=0,v=e.length;v>m;m++){var g,w,p=e[m],f={event:p},$=this.isDateMatching(u,p.start),y=this.isDateMatching(u,p.end);if($)g=d(p,l,h),w=100*l/h,c.push(f);else{var E=aria.utils.Array.indexOf(i,p);g=100,w=0,-1!=E?_[E]=f:E=this.__pushOnFirstFree(_,f),a[E]=p}f.meta={first_day:$,last_day:y,width:g,left:w}}for(var m=0,v=c.length;v>m;m++){var p=c[m],E=this.__pushOnFirstFree(_,p);a[E]=p.event}i=a,s[l]=_}return s},getAllDayEventsRows:function(t,e){var i=0;if(t)for(var a in e)if(e.hasOwnProperty(a)){var n=e[a].length;n>i&&(i=n)}return i=2>i?2:i+1,this.viewData.allDayRows=i,i},setTimetableTopOffset:function(){var t=Aria.$window.document.querySelectorAll(".calendar div.timetable");t[0].style.top=22*this.viewData.allDayRows+"px"},itemHighlight:function(t,e){var i=Aria.$window.document.querySelectorAll("."+e.className);this.zIndexHighlight=[];for(var a=0,n=i.length;n>a;a++)new aria.utils.ClassList(i[a]).add("highlight"),this.zIndexHighlight[a]=i[a].style.zIndex,i[a].style.zIndex=1e3},itemUnhighlight:function(t,e){for(var i=Aria.$window.document.querySelectorAll("."+e.className),a=0,n=i.length;n>a;a++)new aria.utils.ClassList(i[a]).remove("highlight"),i[a].style.zIndex=this.zIndexHighlight[a]},mousedown:function(t,e){if(t.stopPropagation(),this.isAllDayModification=e.isAllDay,this.modifyingEventsName=this.isAllDayModification?"modifyingAllDayEvents":"modifyingEvents",this.isItemMoving=!e.isResize,this.isNewItem=e.isColumn&&t.ctrlKey,this.resizeTop=e.resizeTop,this.startItemColumn=this.currentItemColumn=e.column,this.modEvent=void 0===e.order?void 0:this.data.events[e.order],this.currentX=t.screenX,this.currentY=t.screenY,this.isNewItem||void 0!==e.order){if(this.isNewItem){var i=new Date(this.data.range[this.startItemColumn]),a=new Date(i),n=t.target.getParentWithData("scrollable").getScroll(),s=Aria.$window.document.getElementById(this.$getId("column_"+this.startItemColumn));if(!e.isAllDay){var r=t.clientY-aria.utils.Dom.getGeometry(s).y+n.scrollTop;t.clientX-aria.utils.Dom.getGeometry(s).x+n.scrollLeft;var o=Math.floor(r/this.STEP),d=Math.floor(o/4),l=15*(o%4);i.setHours(d),i.setMinutes(l),a=new Date(i),a.setMinutes(a.getMinutes()+15)}var h={start:i,end:a,title:"NEW EVENT",all_day:e.isAllDay};aria.utils.Json.add(this.viewData[this.modifyingEventsName],h),this.modEvent=h,this.isItemMoving=!1,this.isModificationStarted=!0}aria.utils.Event.addListener(Aria.$window.document,"mouseup",{fn:this.mouseup,scope:this},!0),aria.utils.Event.addListener(Aria.$window.document,"mousemove",{fn:this.mousemove,scope:this},!0)}},mouseup:function(){aria.utils.Event.removeListener(Aria.$window.document,"mouseup",{fn:this.mouseup,scope:this}),aria.utils.Event.removeListener(Aria.$window.document,"mousemove",{fn:this.mousemove,scope:this}),this.isModificationStarted&&(this.data.events.selectedEventIndex="",aria.templates.RefreshManager.stop(),this.isNewItem?aria.utils.Json.add(this.data.events,this.modEvent):(aria.utils.Json.setValue(this.modEvent,"start",new Date(this.modEvent.start)),aria.utils.Json.setValue(this.modEvent,"end",new Date(this.modEvent.end))),aria.utils.Json.setValue(this.viewData,this.modifyingEventsName,[]),aria.templates.RefreshManager.resume(),this.__endModification(this.modEvent))},mousemove:function(t){var e=t.screenX,i=t.screenY,a=i-this.currentY,n=e-this.currentX;if((Math.abs(a)>=this.STEP||Math.abs(n)>=10)&&(this.__startModification(),Math.abs(a)>=this.STEP&&!this.isAllDayModification&&this.updateY(a),Math.abs(n)>=10)){this.currentX+=n;var s=this.getParentColumnId(aria.core.Browser.isIE?t.srcElement:t.target);null!=s&&s!=this.currentItemColumn&&this.updateX(s)}},__startModification:function(){this.isModificationStarted||(this.moduleCtrl.itemEditBegin(this.modEvent),this.isModificationStarted=!0,aria.utils.Json.add(this.viewData[this.modifyingEventsName],this.modEvent))},__endModification:function(t){this.isModificationStarted=!1,this.moduleCtrl.itemEditEnd(t),this.updateEventTimeZones(t),this.moduleCtrl.change(t)},updateX:function(t){var e=t-this.currentItemColumn,i=this.modEvent,a=i.start.getDate(),n=i.end.getDate();if(this.isItemMoving)i.end.setDate(n+e),i.start.setDate(a+e),this.currentItemColumn=t,this.moduleCtrl.itemEditMove(i);else{var s=new Date(i.start).setDate(a+e),r=new Date(i.end).setDate(n+e),o=this.resizeTop&&(i.end>s||s==i.end.getTime()&&this.isAllDayModification),d=!this.resizeTop&&(r>i.start||r==i.start.getTime()&&this.isAllDayModification);o?i.start.setDate(a+e):d&&i.end.setDate(n+e),(o||d)&&(this.currentItemColumn=t,this.moduleCtrl.itemEditResize(i))}this.$refresh({outputSection:this.isAllDayModification?"allDayModificationLayer":"modificationLayer"})},updateY:function(t){var e=Math.floor(t/this.STEP),i=e*this.STEP,a=15*e,n=this.modEvent,s=n.start.getMinutes(),r=n.end.getMinutes();if(this.isItemMoving)n.end.setMinutes(n.end.getMinutes()+a),n.start.setMinutes(n.start.getMinutes()+a),this.currentY+=i,this.moduleCtrl.itemEditMove(n);else{var o=this.resizeTop&&new Date(n.start).setMinutes(s+a)<n.end,d=!this.resizeTop&&new Date(n.end).setMinutes(r+a)>n.start;o&&n.start.setMinutes(s+a),d&&n.end.setMinutes(r+a),(o||d)&&(this.currentY+=i,this.moduleCtrl.itemEditResize(n))}this.$refresh({outputSection:"modificationLayer"})},__restoreTimetableScroll:function(){void 0===this.lastTimetableScroll&&(this.lastTimetableScroll=(60*this.data.startDisplayHours+this.data.startDisplayMinutes)*this.TABLE_HEIGHT/1440);var t=Aria.$window.document.querySelectorAll(".calendar div.timetable");t[0].scrollTop=this.lastTimetableScroll},getParentColumnId:function(t){var e,i=t;return aria.utils.Type.isInstanceOf(t,"Document")?null:(aria.utils.Type.isInstanceOf(t,"aria.templates.DomElementWrapper")||(i=new aria.templates.DomElementWrapper(t)),i=i.getParentWithData("class"),i&&(e=parseInt(i.getData("id"),10)),e)},getColumnWidth:function(){var t=new Date;return 60*t.getHours()+t.getMinutes()},getCurrentTimePosition:function(){var t=new Date;return(60*t.getHours()+t.getMinutes())*this.TABLE_HEIGHT/1440},getFormattedTime:function(t){var e=t.getMinutes();return t.getHours()+":"+(10>e?"0":"")+e},itemClick:function(t,e){var i=this.$getId("calItem_"+this.data.events.selectedEventIndex);this.data.events.selectedEventIndex=e.data.event.order;var a=this.$getId("calItem_"+this.data.events.selectedEventIndex);this._removeClass("selected",i),this._addClass("selected",a),this.moduleCtrl.itemClick(e.data.event,e)},itemDoubleClick:function(t,e){this.moduleCtrl.itemDoubleClick(e.data.event,e)},_addClass:function(t,e){for(var i=Aria.$window.document.querySelectorAll("."+e),a=0,n=i.length;n>a;a++)new aria.utils.ClassList(i[a]).add(t)},_removeClass:function(t,e){for(var i=Aria.$window.document.querySelectorAll("."+e),a=0,n=i.length;n>a;a++)new aria.utils.ClassList(i[a]).remove(t)},_selected:function(t){return this.data.events.selectedEventIndex===t?"selected":""}}});
//*******************
//LOGICAL-PATH:atplugins/calendarwidget/views/CalendarStyle.tpl.css
//*******************
Aria.classDefinition({$classpath:"atplugins.calendarwidget.views.CalendarStyle",$extends:"aria.templates.CSSTemplate",$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this){var globalWidth=0,globalHeight=0,fullscreen=0===globalWidth&&0===globalHeight,sidebarWidth=0;this.__$write("\n\ntable {\nmax-width: 100%;\nbackground-color: transparent;\nborder-collapse: collapse;\nborder-spacing: 0;\n}\n\n.btn {\ndisplay: inline-block;\npadding: 4px 12px;\nmargin-bottom: 0;\nfont-size: 14px;\nline-height: 20px;\ntext-align: center;\nvertical-align: middle;\ncursor: pointer;\ncolor: #333333;\ntext-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);\nbackground-color: #f5f5f5;\nbackground-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);\nbackground-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));\nbackground-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);\nbackground-image: -o-linear-gradient(top, #ffffff, #e6e6e6);\nbackground-image: linear-gradient(to bottom, #ffffff, #e6e6e6);\nbackground-repeat: repeat-x;\nfilter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);\nfilter: progid:DXImageTransform.Microsoft.gradient(enabled = false);\nborder: 1px solid #bbbbbb;\nborder-bottom-color: #a2a2a2;\n-webkit-border-radius: 4px;\n-moz-border-radius: 4px;\nborder-radius: 4px;\n-webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);\n-moz-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);\nbox-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);\nborder-color: rgba(0, 0, 0, 0.15) rgba(0, 0, 0, 0.15) rgba(0, 0, 0, 0.25);\n}\n\n.btn:hover,\n.btn:active,\n.btn.active,\n.btn.disabled,\n.btn[disabled] {\ncolor: #333333;\nbackground-color: #e6e6e6;\n*background-color: #d9d9d9;\n}\n.btn:active,\n.btn.active {\nbackground-color: #cccccc \\9;\n}\n.btn:hover {\ncolor: #333333;\ntext-decoration: none;\nbackground-position: 0 -15px;\n-webkit-transition: background-position 0.1s linear;\n-moz-transition: background-position 0.1s linear;\n-o-transition: background-position 0.1s linear;\ntransition: background-position 0.1s linear;\n}\n.btn.active,\n.btn:active {\nbackground-image: none;\noutline: 0;\n-webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);\n-moz-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);\nbox-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);\n}\n\n.btn-group {\nposition: relative;\ndisplay: inline-block;\nfont-size: 0;\nvertical-align: middle;\nwhite-space: nowrap;\n}\n\n.btn-group>.btn:first-child {\nmargin-left: 0;\n-webkit-border-top-left-radius: 4px;\n-moz-border-radius-topleft: 4px;\nborder-top-left-radius: 4px;\n-webkit-border-bottom-left-radius: 4px;\n-moz-border-radius-bottomleft: 4px;\nborder-bottom-left-radius: 4px;\n}\n\n.btn-group>.btn, .btn-group>.dropdown-menu, .btn-group>.popover {\nfont-size: 14px;\n}\n\n.btn-group>.btn {\nposition: relative;\n-webkit-border-radius: 0;\n-moz-border-radius: 0;\nborder-radius: 0;\n}\n\n.btn-group>.btn:last-child, .btn-group>.dropdown-toggle {\n-webkit-border-top-right-radius: 4px;\n-moz-border-radius-topright: 4px;\nborder-top-right-radius: 4px;\n-webkit-border-bottom-right-radius: 4px;\n-moz-border-radius-bottomright: 4px;\nborder-bottom-right-radius: 4px;\n}\n\n.btn-group>.btn+.btn {\nmargin-left: -1px;\n}\n\n.pull-right {\nfloat: right;\n}\n\n.pull-left {\nfloat: left;\n}\n\n\n\n\n\n\n\n\n\n.calendar {\nposition: absolute;\ntop: 5px; left: 5px;\n",9),fullscreen?this.__$write("\nright: 5px; bottom: 5px;\n",141):(this.__$write("\nwidth: ",143),this.__$write(globalWidth,143),this.__$write("px; height: ",143),this.__$write(globalHeight,143),this.__$write("px;\n",143)),this.__$write('\nbackground-color: #fff;\nborder: 1px solid #cce6ff;\nmargin: 0;\nfont-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\nfont-size: 14px;\nline-height: 20px;\ncolor: #333333;\n}\n\n.sidebar {\nposition: absolute;\ntop: 0;\nleft: 0;\nwidth: ',145),this.__$write(sidebarWidth,158),this.__$write("px;\nbottom: 0;\n}\n\n.main-content {\nposition: absolute;\ntop: 0;\nleft: ",158),this.__$write(sidebarWidth+5,165),this.__$write('px;\nright: 0;\nbottom: 0;\n}\n\n.header-nav {\nheight: 40px;\npadding: 5px 5px 0 0;\n}\n\n.calendar-grid {\n-webkit-user-select: none;\n-moz-user-select: -moz-none;\n-ms-user-select: none;\nposition: absolute;\ntop: 38px;\nleft: 0;\nright: 5px;\nbottom: 5px;\nborder-top: 1px solid #cce6ff;\nborder-right: 1px solid #cce6ff;\nborder-bottom: 1px solid #cce6ff;\n}\n\n.calendar-header {\nwidth: 100%;\ntable-layout: fixed;\n}\n\n.calendar .timetable {\nposition: absolute;\nwidth: 100%;\noverflow-y: auto;\nbottom: 0px;\n}\n\n.calendar-header th {\nheight: 38px;\nborder-left: 1px solid #cce6ff;\n}\n\n.header-week .hours, .header-day .hours {\nwidth: 50px;\n}\n\n.header-week th, .header-day th {\nborder-bottom: 1px solid #cce6ff;\n}\n\n.header-week th {\nfont-weight: normal;\ntext-align: left;\n}\n\n.header-week th .date {\nfloat: left;\nfont-size: 30px;\nmargin: 12px 5px 6px;\n}\n.header-week th .day, .header-week th .month {\nfont-size: 12px;\ntext-transform: capitalize;\noverflow: hidden;\ntext-overflow: ellipsis;\nwhite-space: nowrap;\n}\n.header-week th .day {\ncolor: #B0B0B0;\n}\n.header-week th .month { margin-top: -2px }\n\n.calendar-wrapper {\nposition: absolute;\ntop: 39px;\nleft: 0;\nright: 0;\nbottom: 0;\noverflow-y: auto;\noverflow-x: hidden;\n}\n\n.calendar-wrapper-month {\nmargin-top: -1px;\n}\n\n.event-title {\ndisplay: block;\noverflow: hidden;\ntext-overflow: ellipsis;\nwhite-space: nowrap;\n}\n\n\ntable.day, table.week, table.day-items, table.week-items {\nheight: 2016px;\nwidth: 100%;\ntable-layout: fixed;\nposition : absolute;\n}\n\ntd.hourStart {\nborder-top: 2px solid #dedede;\n}\n\n.calendar-items-outer {\nheight: 2016px;\nwidth: 100%;\ntable-layout: fixed;\nposition : absolute;\n}\n\n.calendar-column {\nvertical-align : top;\nheight: 2016px;\noverflow: hidden;\nmargin-right: 5px;\nmargin-left: 5px;\nposition: relative;\n}\n\n.calendar-item {\nposition : absolute;\nbackground-color : rgb(255, 165, 0);\ndisplay: block;\nopacity: 0.8;\n\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";\n\nfilter: alpha(opacity=80);\nborder-radius: 5px;\nborder : 1px solid #CB7403;\n}\n\n.calendar-item.highlight {\nopacity: 1;\n\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";\n\nfilter: alpha(opacity=100);\n}\n\n.calendar-item.moving {\nbackground-color: rgba(255, 165, 0, 0.5);\nborder-color: black;\nborder-style: dashed;\nbox-shadow: 5px 10px 5px #888;\n}\n\n.moving .calendar-item-header {\nbackground-color: rgba(203, 116, 3, 0.5);\n}\n\n.calendar-item span{\npadding-left : 3px;\n}\n\n\n.calendar-item-header {\ntop : 0;\nbackground-color : rgb(203, 116, 3);\ndisplay: block;\nheight : 18px;\nborder-top-left-radius: 5px;\nborder-top-right-radius: 5px;\npadding-left : 3px;\noverflow: hidden;\ntext-overflow: ellipsis;\nwhite-space: nowrap;\n}\n\n.calendar-item-footer {\nposition: absolute;\nbottom : 0;\nheight : 18px;\npadding-left : 3px;\n}\n\ntable.all-day-events .event.holiday, .calendar-item.holiday {\nbackground-color: rgb(108, 196, 23);\n}\n\ntable.all-day-events.modLayer .event.holiday, .calendar-item.moving.holiday {\nbackground-color: rgba(108, 196, 23, 0.5);\n}\n\n.holiday .calendar-item-header {\nbackground-color: rgb(78, 166, 20);\n}\n\n.moving.holiday .calendar-item-header {\nbackground-color: rgba(78, 166, 20, 0.5);\n}\n\n.expandAllDay {\nborder-radius: 5px;\npadding: 2px 10px;\ncursor: pointer;\n}\n\n.expandAllDay:hover {\nbackground-color: rgb(255, 165, 0);;\n}\n\n.currentTimeLine{\nbackground-color: red;\nheight: 2px;\nposition: relative;\nwidth: 100%;\nz-index: 1000;\n}\n\n.day th.hours, .week th.hours, .all-day-events th, .day-items th.hours, .week-items th.hours {\nwidth: 50px;\nborder-left: 1px solid #cce6ff;\n}\n\n\n.day td, .week td, .all-day-events td {\nborder-left: 1px solid #cce6ff;\nborder-bottom: 1px solid #dedede;\n}\n\n.all-day-events.itemsContainer td{\nborder: 0px;\n}\n\n.all-day-events td{\nheight: 100%;\n}\n\n.day tr:last-child td, .week tr:last-child td {\nborder-bottom: none;\n}\n\n.day td .dash, .week td .dash {\nborder-top: 1px dotted #cacaca;\n}\n\n.all-day-events {\nwidth: 100%;\ntable-layout: fixed;\n}\n.all-day-events th {\nborder-bottom: 1px solid #cce6ff;\n}\n\n\n\n\n\n\n.all-day-events {\nposition: absolute;\nleft: 0;\nwidth: 100%;\noverflow: hidden;\n}\n\n.all-day-events table.grid {\nposition: absolute;\ntop: 0;\nleft: 0;\nheight: 100%;\nwidth: 100%;\ntable-layout: fixed;\n}\n\n.all-day-events table.grid td {\nborder-left: 1px solid #cce6ff;\n}\n\ntable.all-day-events {\ntable-layout: fixed;\nwidth: 100%;\nheight: 100%;\n}\ntable.all-day-events td.date-title {\nborder-left: 1px solid #cce6ff;\nborder-top: 1px solid #cce6ff;\ntext-align: right;\npadding: 4px 5px 0;\nline-height: 16px;\noverflow: hidden;\nfont-size: 12px;\n}\n\ntable.all-day-events td.today {\nfont-weight: bold;\n}\n\ntable.all-day-events td.date-title.previous, .month-row table.events td.date-title.next, .month-row table.events td.date-title.past {\ncolor: #cacaca;\n}\n\ntable.all-day-events .event {\nfont-size: 12px;\npadding: 0 2px;\nmargin-bottom: 1px;\n\nposition: relative;\nborder-width: 1px 0px;\nbackground-color: rgb(255, 165, 0);\ncolor: #fafafa;\nborder-color: #CB7403;\nborder-style: solid;\nopacity: 0.8;\n\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";\n\nfilter: alpha(opacity=80);\n}\n\ntable.all-day-events .highlight .event {\nopacity: 1;\n\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";\n\nfilter: alpha(opacity=100);\n}\n\ntable.all-day-events .first .event {\nmargin-left: ',165),aria.core.Browser.isFirefox?this.__$write(" 1px ",486):this.__$write(" 2px ",486),this.__$write(";\nborder-left-width: 1px;\nborder-top-left-radius: 3px;\nborder-bottom-left-radius: 3px;\n}\n\ntable.all-day-events .last .event {\nmargin-right: ",486),aria.core.Browser.isFirefox?this.__$write(" 2px ",493):this.__$write(" 1px ",493),this.__$write(';\nborder-right-width: 1px;\nborder-top-right-radius: 3px;\nborder-bottom-right-radius: 3px;\n}\n\ntable.all-day-events.modLayer .event {\nborder-style: dashed;\nz-index: 1000;\nbackground-color: rgba(255, 165, 0, 0.5);\nheight: 100%;\n}\n\ntable.all-day-events.modLayer .calendar-all-day-item {\nheight: 100%;\n}\n\ntable.all-day-events.modLayer .event .title{\nposition: absolute;\nbottom: 0px;\n}\n\ntable.all-day-events .event .title, .month-row table.events .event .title-remind {\nwhite-space: nowrap;\ntext-overflow: ellipsis;\noverflow: hidden;\ndisplay : block;\n}\n\ntable.all-day-events .event .title-remind:before {\n\nmargin-left: 3px;\n}\n\ntable.all-day-events .event .resize-left, table.all-day-events .event .resize-right {\nposition: absolute;\nwidth: 10px;\ntop: -2px; bottom: -2px;\n}\ntable.all-day-events .event .resize-left {\nleft: -5px;\ncursor: w-resize;\n}\n\ntable.all-day-events .event .resize-right {\nright: -5px;\ncursor: e-resize;\n}\n\n\ntable.all-day-events .past.event {\nopacity: 0.75;\n\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)";\n\nfilter: alpha(opacity=75);\n}\n\ntable.all-day-events .break-start, table.all-day-events .break-end {\nposition: relative;\npadding: 0 1px;\n}\n\ntable.all-day-events .break-start {\nborder-left-width: 1px;\nborder-left-style: dotted;\nmargin-left: 3px;\n}\n\ntable.all-day-events .break-end {\nborder-right-width: 1px;\nborder-right-style: dotted;\nmargin-right: 3px;\n}\n\ntable.all-day-events .break-start .arrow {\nfloat: left;\n}\n\ntable.all-day-events .break-end .arrow {\nfloat: right;\n}\n\ntable.all-day-events .arrow {\ndisplay: inline-block;\nwidth: 1px;\nborder-left: 1px dotted #CB7403;\nborder-right: 1px dotted #CB7403;\n\n\n}\n\n\n.today {\nbackground-color: #ffc;\n}\n\n.previous, .next, .weekend, .no-work {\nbackground-color: #fafafa;\n}\n\n.today.no-work {\nbackground-color: #F2F2C6;\n}\n\n.movable {\ncursor: move;\n}\n\n.calendar-item .resize-top, .calendar-item .resize-bottom {\nposition: absolute;\nheight: 10px;\nleft: -2px; right: -2px;\n}\n.calendar-item .resize-top {\ntop: -5px;\ncursor: n-resize;\n}\n\n.calendar-item .resize-bottom {\nbottom: -5px;\ncursor: s-resize;\n}\n\n.calendar-item.selected {\nbackground-color: #CCE6FF;\nopacity: 1;\n\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";\n\nfilter: alpha(opacity=100);\n}\n\n.calendar-all-day-item.selected .event{\nbackground-color: #CCE6FF;\nopacity: 1;\n\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";\n\nfilter: alpha(opacity=100);\ncolor: #333333;\n}\n\n.timezone {\nfont-size: 8px;\nfont-weight: normal;\nline-height: 10px;\n}\n\n.dummy-th, .dummy-td {\n',493),aria.core.Browser.isFirefox?this.__$write("\nwidth: 17px;\n",644):this.__$write("\nwidth: 16px;\n",646),this.__$write("\n}\n\n.all-day-section, .timetableSpan {\ndisplay: block;\n}\n\n.calendar-item.eventContinuation {\n-webkit-border-top-left-radius: 0px;\n-moz-border-radius-topleft: 0px;\nborder-top-left-radius: 0px;\n-webkit-border-top-right-radius: 0px;\n-moz-border-radius-topright: 0px;\nborder-top-right-radius: 0px;\n}\n\n\n",648)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$csslibs={},t.__$prefix=!0},__$initTemplate:function(){return!0}}});